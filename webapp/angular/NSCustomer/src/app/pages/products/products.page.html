<menu></menu>
 
<div class="vendor-section-wrapper" style="margin-top: 100px;">
  <app-my-carousel (messageEvent)="receiveMessage($event)" [receivedParentMessage]="messageToSendP"></app-my-carousel>
</div>

 <div class="container">
 <div class="row">
   <!-- Search Container - takes product list width (col-md-7) -->
   <div class="col-md-7">
     <div class="search-wrapper mb-3">
       <i class="zmdi zmdi-search search-icon"></i>
       <input 
         [(ngModel)]="searchText" 
         class="search-input" 
         type="text"
         placeholder="Search for products...">
       <button 
         *ngIf="searchText" 
         class="clear-search-btn" 
         (click)="searchText = ''"
         type="button">
         <i class="zmdi zmdi-close"></i>
       </button>
     </div>
   </div>
   
   <!-- Sort Container - takes cart width (col-md-5) -->
   <div class="col-md-5">
     <div class="sort-wrapper mb-3">
       <i class="zmdi zmdi-sort sort-icon"></i>
       <select class="sort-select" [(ngModel)]="sortOption">
         <option value="name|asc">Name (A to Z)</option>
         <option value="name|desc">Name (Z to A)</option>
         <option value="price|lth">Price (Low to High)</option>
         <option value="price|htl">Price (High to Low)</option>
       </select>
     </div>
   </div>
 </div>
 <div class="row">
 <div class="col-md-7">
   <!-- Loader -->
   <div *ngIf="isLoading" class="loader-container">
     <div class="loader-spinner">
       <div class="spinner-circle"></div>
       <div class="spinner-circle"></div>
       <div class="spinner-circle"></div>
     </div>
     <p class="loading-text">Loading products...</p>
   </div>

   <!-- Products List -->
   <div *ngIf="!isLoading">
     <productslist-dir
       (refresh)="ref($event)"
       [allProductList]="items"
       [searchedText]="searchText"
       [sortingBy]="sortOption"
     ></productslist-dir>
     
     <!-- No Items Found Message -->
     <div *ngIf="filteredItemsCount === 0 && !isLoading && !shopErrorMessage" class="no-items-container">
       <div class="no-items-content">
         <i class="zmdi zmdi-shopping-basket" style="font-size: 4rem; color: #ccc;"></i>
         <h4>No Products Found</h4>
         <p *ngIf="searchText">No products match your search "<strong>{{searchText}}</strong>"</p>
         <p *ngIf="!searchText">No products available at the moment.</p>
         <button *ngIf="searchText" class="btn btn-primary btn-sm mt-2" (click)="searchText = ''">
           Clear Search
         </button>
       </div>
     </div>
     
     <div *ngIf="shopErrorMessage" class="mt-3 alert alert-warning">
       {{ shopErrorMessage }}
     </div>
   </div>
 </div>
 
 <div class="col-md-5">
 <cart
 *ngIf="cartflag"
 ></cart>
 </div>
 </div>
 </div>

<!-- Login Success Modal -->
<div class="modal fade show" *ngIf="showLoginSuccessModal" style="display: block; background-color: rgba(0,0,0,0.5);">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body text-center p-4">
        <i class="zmdi zmdi-check-circle zmdi-hc-3x text-success mb-3"></i>
        <h4 class="text-success">Welcome!</h4>
        <p class="mb-0">You are successfully logged in</p>
      </div>
    </div>
  </div>
</div>

<!-- Vendor Switch Confirmation Modal -->
<div class="modal fade show" *ngIf="showVendorSwitchModal" style="display: block; background-color: rgba(0,0,0,0.5);">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title">
          <i class="zmdi zmdi-alert-triangle mr-2"></i>Switch Vendor?
        </h5>
        <button type="button" class="close" (click)="cancelVendorSwitch()">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body p-4">
        <div class="text-center mb-3">
          <i class="zmdi zmdi-shopping-cart zmdi-hc-3x text-warning"></i>
        </div>
        <h5 class="text-center mb-3">Clear Your Cart?</h5>
        <p class="text-center">
          Your cart contains items from another vendor. We currently <strong>do not support multi-vendor orders</strong>.
        </p>
        <p class="text-center text-danger font-weight-bold">
          Switching vendors will remove all items from your cart.
        </p>
        <p class="text-center text-muted small">
          Do you want to clear your cart and continue with the new vendor?
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="cancelVendorSwitch()">
          <i class="zmdi zmdi-close mr-1"></i>Cancel
        </button>
        <button type="button" class="btn btn-warning text-dark font-weight-bold" (click)="confirmVendorSwitch()">
          <i class="zmdi zmdi-delete mr-1"></i>Clear Cart & Switch
        </button>
      </div>
    </div>
  </div>
</div>